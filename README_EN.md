# TusDatos App - Backend Developer Technical Test
## Introduction
The implemented solution aims to achieve two objectives:

1. Extract data from the Ecuadorian Judiciary Function - Advanced Judicial Processes Search page using web scraping, and subsequently create a database.
2. Enable an API using FastAPI to access the extracted data.

## Implementation Details
### Data Extraction:
Initially, a development was carried out to access the platform. Using Selenium's WebDriver, navigation through the platform was automated to access each of the locations where the data to be extracted is displayed. Subsequently, the data was captured and formatted to be stored with a defined structure in a JSON file.
### Storage Notes:
In addition to structuring the JSON with the data obtained from the web, 2 properties were added:

- `documento`: Where the document used for the query is stored.
- `tipo`: Refers to the filter used for the query, for example, plaintiff/offended (plaintiff) || defendant/prosecuted (defendant).


### API:
Endpoints were developed to list and search the data stored in the previous step. Additionally, an endpoint was created for login and authentication, necessary to access the aforementioned data. These endpoints are as follows:

**Authentication:**

* URL: ${HOST}/api/login
* Parameters:
    - username: Username to validate (Example: Mauricio Carmona)
    - email: User's email, must be a valid email ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
* Response: Returns an authentication token

**List All:**

* URL: ${HOST}/api/process
* Header:
    - Authorization: Authentication token
* Parameters:
    - offset: Starting position to list
    - limit: Number of objects to retrieve
* Response: Returns a list of objects applying pagination

**Search One:**

* URL: ${HOST}/api/process/{id}
* Header:
    - Authorization: Authentication toke
* Response: Returns a specific object filtered by its ID property

**NOTE:** To execute these endpoints, follow these steps (all respond after starting the application):
- Access the documentation generated by FastAPI [Docs](http://localhost:8000/docs)
- Use the Postman collection named TusDatos.postman_collection.json

## Setup

1. Enable a virtual environment for project with the following command:

    ```
    python -m virtualenv venv
    ```

2. Activate the environment:

    ```
    .\venv\Scripts\activate
    ```

3. Install the necessary dependencies:

    ```
    pip install -r requirements.txt
    ```

4. Run API:

    ```
    python .\src\api\main.py
    ```

## Test
* To run the test, execute the following command:
    ```
    pytest -v 
    ```
 
